(function($){'use strict';var Lang={ru:{months:['Январь','Февраль','Март','Апрель','Май','Июнь','Июль','Август','Сентябрь','Октябрь','Ноябрь','Декабрь'],monthsRp:['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'],monthsPp:['январе','феврале','марте','апреле','мае','июне','июле','августе','сентябре','октябре','ноябре','декабре'],maxPurchase:'Больше всего заказов (_COUNT_)  было  _DATE_ _MONTH_  2015 ',stockInfoTitle:'Более 100 000 продаж в',stockInfoTime:'Сроки проведения акции с _STARTDATE_ _STARTMONTH_  по _ENDDATE_ _ENDMONTH_  '}};var Landing=function(){this.nowDate=new Date();this.params={lang:'ru',maxPurchase:2419,maxPurchaseDate:2,startStockDate:29,endStockDate:1,lastPackTime:15,countDownDiff:Math.ceil((24*60*60)-(this.nowDate.getHours()*60*60+this.nowDate.getMinutes()*60+this.nowDate.getSeconds())),selectors:{countDown:'.landing__countdown',maxPurcahesDate:'.landing__maxpurcashe',stockInfo:'.landing__stockinfo',stockInfoTitle:'.landing__stockinfo_title',lastPack:'.landing__lastpack'}};this.initCountDown();this.initMaxPurcasheDate();this.initStockInfo();this.initLastPack();this.initEvents();};Landing.prototype.initEvents=function(){$('a[href*=#]:not([href=#])').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=$(this.hash);target=target.length?target:$('[name='+this.hash.slice(1)+']');if(target.length){$('html,body').animate({scrollTop:target.offset().top},1000);return false;}}});};Landing.prototype.initLastPack=function(){var _this=this;var lastPackTimer=setTimeout(function(){$(_this.params.selectors.lastPack).each(function(index,elem){var val=parseFloat($(elem).text(),10);$(elem).html((val-1));});},this.params.lastPackTime*1000);};Landing.prototype.initStockInfo=function(){var lang=Lang[this.params.lang];var stockTitle=lang.stockInfoTitle+lang.monthsPp[this.nowDate.getUTCMonth()];var endStockDate=new Date(this.nowDate.getTime()+(this.params.endStockDate*24*60*60*1000));var startStockDate=new Date(this.nowDate.getTime()-(this.params.startStockDate*24*60*60*1000));var stockInfo=lang.stockInfoTime;stockInfo=stockInfo.replace('_STARTDATE_',startStockDate.getUTCDate());stockInfo=stockInfo.replace('_ENDDATE_',endStockDate.getUTCDate());stockInfo=stockInfo.replace('_STARTMONTH_',lang.monthsRp[startStockDate.getMonth()]);stockInfo=stockInfo.replace('_ENDMONTH_',lang.monthsRp[endStockDate.getMonth()]);$(this.params.selectors.stockInfoTitle).html(stockTitle);$(this.params.selectors.stockInfo).html(stockInfo);};Landing.prototype.initMaxPurcasheDate=function(){var maxPurchaseDate=new Date(this.nowDate.getTime()-(this.params.maxPurchaseDate*24*60*60*1000));var htmlString=Lang[this.params.lang].maxPurchase;htmlString=htmlString.replace('_COUNT_',this.params.maxPurchase);htmlString=htmlString.replace('_DATE_',maxPurchaseDate.getUTCDate());htmlString=htmlString.replace('_MONTH_',Lang[this.params.lang].monthsRp[maxPurchaseDate.getUTCMonth()]);$(this.params.selectors.maxPurcahesDate).html(htmlString);};Landing.prototype.initCountDown=function(){var _this=this,endDate=new Date(this.nowDate.getTime()+this.params.countDownDiff*1000);var countDownTimer=setInterval(function(){var diffDate=new Date(endDate.getTime()-Date.now()),h=(diffDate.getHours()>9)?diffDate.getHours():'0'+diffDate.getHours(),m=(diffDate.getMinutes()>9)?diffDate.getMinutes():'0'+diffDate.getMinutes(),s=(diffDate.getSeconds()>9)?diffDate.getSeconds():'0'+diffDate.getSeconds();var htmlTime='<span class="hours">'+h+'</span>'+'<span class="minutes">'+m+'</span>'+'<span class="seconds">'+s+'</span>';$(_this.params.selectors.countDown).html(htmlTime);},1000);};Landing.prototype.scrollToForm=function(event){var $target=$(event.currentTarget);$("body,html").animate({scrollTop:$($target.attr("href")).offset().top},1e3);event.preventDefault();};$(function(){window.landing=new Landing();$('.bxslider').bxSlider();});})(jQuery);